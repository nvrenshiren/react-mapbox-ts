(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{DEH5:function(e,t,a){"use strict";t["a"]={accessToken:"pk.eyJ1IjoiMTg2MjcwMjE1NDMiLCJhIjoiY2s4dHh3dnJ6MDBlMDNmb2l2bDQ4aDF1YSJ9.f6-80XxhwYLNJRDdntMF2w",style:"mapbox://styles/mapbox/streets-v11",center:{lon:114.305215,lat:30.592935},zoom:10}},"p+rc":function(e,t,a){"use strict";a.r(t);var r=a("ODXe"),c=a("DEH5"),s=a("q1tI"),o=a.n(s),l=a("PYKl"),n=()=>{var e=Object(s["useRef"])(),t=["<",["get","mag"],2],a=["all",[">=",["get","mag"],2],["<",["get","mag"],3]],n=["all",[">=",["get","mag"],3],["<",["get","mag"],4]],i=["all",[">=",["get","mag"],4],["<",["get","mag"],5]],m=[">=",["get","mag"],5],u=["#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c"],g=Object(s["useRef"])({}).current,d=Object(s["useState"])({}),h=Object(r["a"])(d,2),p=h[0],b=h[1],f=Object(s["useCallback"])(()=>{for(var t={},a=e.current.querySourceFeatures("earthquakes"),r=0;r<a.length;r++){var c=a[r].geometry["coordinates"],s=a[r].properties;if(s.cluster){var o=s.cluster_id,l=g[o];if(!l){var n=k(s);l=g[o]={positon:c,children:n}}t[o]=l}}b(t)},[]),k=Object(s["useCallback"])(e=>{for(var t=[],a=[e.mag1,e.mag2,e.mag3,e.mag4,e.mag5],r=0,c=0;c<a.length;c++)t.push(r),r+=a[c];for(var s=r>=1e3?22:r>=100?20:r>=10?18:16,o=r>=1e3?50:r>=100?32:r>=10?24:18,l=Math.round(.6*o),n=2*o,i='<svg width="'+n+'" height="'+n+'" viewbox="0 0 '+n+" "+n+'" text-anchor="middle" style="font: '+s+'px sans-serif">',m=0;m<a.length;m++)i+=M(t[m]/r,(t[m]+a[m])/r,o,l,u[m]);return i+='<circle cx="'+o+'" cy="'+o+'" r="'+l+'" fill="white" /><text dominant-baseline="central" transform="translate('+o+", "+o+')">'+r.toLocaleString()+"</text></svg>",i},[]),M=Object(s["useCallback"])((e,t,a,r,c)=>{t-e===1&&(t-=1e-5);var s=2*Math.PI*(e-.25),o=2*Math.PI*(t-.25),l=Math.cos(s),n=Math.sin(s),i=Math.cos(o),m=Math.sin(o),u=t-e>.5?1:0;return['<path d="M',a+r*l,a+r*n,"L",a+a*l,a+a*n,"A",a,a,0,u,1,a+a*i,a+a*m,"L",a+r*i,a+r*m,"A",r,r,0,u,0,a+r*l,a+r*n,'" fill="'+c+'" />'].join(" ")},[]);return o.a.createElement(l["Map"],{ref:t=>{window.map=t,e.current=t},accessToken:c["a"].accessToken,style:"mapbox://styles/mapbox/dark-v9",zoom:2,center:[0,0],onData:f,onMove:f,onMoveEnd:f},Object.keys(p).map(e=>o.a.createElement(l["Marker"],{key:e,positon:p[e].positon},o.a.createElement("div",{dangerouslySetInnerHTML:{__html:p[e].children}}))),o.a.createElement(l["GeoJSONSource"],{id:"earthquakes",option:{data:"https://docs.mapbox.com/mapbox-gl-js/assets/earthquakes.geojson",cluster:!0,clusterRadius:80,clusterProperties:{mag1:["+",["case",t,1,0]],mag2:["+",["case",a,1,0]],mag3:["+",["case",n,1,0]],mag4:["+",["case",i,1,0]],mag5:["+",["case",m,1,0]]}}},o.a.createElement(l["Layer"],{id:"earthquake_circle",source:"earthquakes",type:"circle",paint:{"circle-color":["case",t,u[0],a,u[1],n,u[2],i,u[3],u[4]],"circle-opacity":.6,"circle-radius":12},filter:["!=","cluster",!0]}),o.a.createElement(l["Layer"],{id:"earthquake_label",type:"symbol",source:"earthquakes",filter:["!=","cluster",!0],layout:{"text-field":["number-format",["get","mag"],{"min-fraction-digits":1,"max-fraction-digits":1}],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":10},paint:{"text-color":["case",["<",["get","mag"],3],"black","white"]}})))};t["default"]=n}}]);
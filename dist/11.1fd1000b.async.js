(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{DEH5:function(e,t,a){"use strict";t["a"]={accessToken:"pk.eyJ1IjoiMTg2MjcwMjE1NDMiLCJhIjoiY2s4dHh3dnJ6MDBlMDNmb2l2bDQ4aDF1YSJ9.f6-80XxhwYLNJRDdntMF2w",style:"mapbox://styles/mapbox/streets-v11",center:{lon:114.305215,lat:30.592935},zoom:10}},"p+rc":function(e,t,a){"use strict";a.r(t);var r=a("ODXe"),c=a("DEH5"),s=a("q1tI"),o=a.n(s),n=a("45In"),l=()=>{var e=Object(s["useRef"])(),t=["<",["get","mag"],2],a=["all",[">=",["get","mag"],2],["<",["get","mag"],3]],l=["all",[">=",["get","mag"],3],["<",["get","mag"],4]],i=["all",[">=",["get","mag"],4],["<",["get","mag"],5]],m=[">=",["get","mag"],5],g=["#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c"],u=Object(s["useRef"])({}).current,d=Object(s["useState"])({}),h=Object(r["a"])(d,2),p=h[0],f=h[1],b=Object(s["useCallback"])(()=>{for(var t={},a=e.current.querySourceFeatures("earthquakes"),r=0;r<a.length;r++){var c=a[r].geometry["coordinates"],s=a[r].properties;if(s.cluster){var o=s.cluster_id,n=u[o];if(!n){var l=k(s);n=u[o]={positon:c,children:l}}t[o]=n}}f(t)},[]),k=Object(s["useCallback"])(e=>{for(var t=[],a=[e.mag1,e.mag2,e.mag3,e.mag4,e.mag5],r=0,c=0;c<a.length;c++)t.push(r),r+=a[c];for(var s=r>=1e3?22:r>=100?20:r>=10?18:16,o=r>=1e3?50:r>=100?32:r>=10?24:18,n=Math.round(.6*o),l=2*o,i='<svg width="'+l+'" height="'+l+'" viewbox="0 0 '+l+" "+l+'" text-anchor="middle" style="font: '+s+'px sans-serif">',m=0;m<a.length;m++)i+=M(t[m]/r,(t[m]+a[m])/r,o,n,g[m]);return i+='<circle cx="'+o+'" cy="'+o+'" r="'+n+'" fill="white" /><text dominant-baseline="central" transform="translate('+o+", "+o+')">'+r.toLocaleString()+"</text></svg>",i},[]),M=Object(s["useCallback"])((e,t,a,r,c)=>{t-e===1&&(t-=1e-5);var s=2*Math.PI*(e-.25),o=2*Math.PI*(t-.25),n=Math.cos(s),l=Math.sin(s),i=Math.cos(o),m=Math.sin(o),g=t-e>.5?1:0;return['<path d="M',a+r*n,a+r*l,"L",a+a*n,a+a*l,"A",a,a,0,g,1,a+a*i,a+a*m,"L",a+r*i,a+r*m,"A",r,r,0,g,0,a+r*n,a+r*l,'" fill="'+c+'" />'].join(" ")},[]);return o.a.createElement(n["h"],{ref:t=>{window.map=t,e.current=t},accessToken:c["a"].accessToken,style:"mapbox://styles/mapbox/dark-v9",zoom:2,center:[0,0],onData:b,onMove:b,onMoveEnd:b},Object.keys(p).map(e=>o.a.createElement(n["j"],{key:e,positon:p[e].positon},o.a.createElement("div",{dangerouslySetInnerHTML:{__html:p[e].children}}))),o.a.createElement(n["d"],{id:"earthquakes",option:{data:"https://docs.mapbox.com/mapbox-gl-js/assets/earthquakes.geojson",cluster:!0,clusterRadius:80,clusterProperties:{mag1:["+",["case",t,1,0]],mag2:["+",["case",a,1,0]],mag3:["+",["case",l,1,0]],mag4:["+",["case",i,1,0]],mag5:["+",["case",m,1,0]]}}},o.a.createElement(n["f"],{id:"earthquake_circle",source:"earthquakes",type:"circle",paint:{"circle-color":["case",t,g[0],a,g[1],l,g[2],i,g[3],g[4]],"circle-opacity":.6,"circle-radius":12},filter:["!=","cluster",!0]}),o.a.createElement(n["f"],{id:"earthquake_label",type:"symbol",source:"earthquakes",filter:["!=","cluster",!0],layout:{"text-field":["number-format",["get","mag"],{"min-fraction-digits":1,"max-fraction-digits":1}],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":10},paint:{"text-color":["case",["<",["get","mag"],3],"black","white"]}})))};t["default"]=l}}]);
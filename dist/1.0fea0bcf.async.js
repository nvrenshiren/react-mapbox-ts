(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{DEH5:function(e,t,r){"use strict";t["a"]={accessToken:"pk.eyJ1IjoiMTg2MjcwMjE1NDMiLCJhIjoiY2s4dHh3dnJ6MDBlMDNmb2l2bDQ4aDF1YSJ9.f6-80XxhwYLNJRDdntMF2w",style:"mapbox://styles/mapbox/streets-v11",center:{lon:114.305215,lat:30.592935},zoom:10}},TNxW:function(e,t){},t9Se:function(e,t,r){"use strict";r.d(t,"h",(function(){return D})),r.d(t,"i",(function(){return x})),r.d(t,"j",(function(){return J})),r.d(t,"k",(function(){return Z})),r.d(t,"d",(function(){return v})),r.d(t,"f",(function(){return E})),r.d(t,"p",(function(){return i})),r.d(t,"n",(function(){return F})),r.d(t,"b",(function(){return s})),r.d(t,"e",(function(){return O})),r.d(t,"o",(function(){return Y})),r.d(t,"l",(function(){return W})),r.d(t,"m",(function(){return q})),r.d(t,"c",(function(){return $})),r.d(t,"a",(function(){return Q})),r.d(t,"g",(function(){return X}));var o=r("k1fw"),c=r("fojp"),n=r.n(c),u=r("q1tI"),a=r.n(u),l=()=>{var e=Object(u["useState"])(0)[1];return()=>e(e=>e+1)},i=l,d=Object(u["forwardRef"])((e,t)=>{var r=Object(u["useRef"])(!1),c=i(),a=Object(u["useContext"])(x),l=a.map,d=Object(u["useRef"])(),s=Object(u["useRef"])(),b=Object(u["useRef"])(Object(o["a"])({},e)),v=Object(u["useRef"])(Object(o["a"])({},e));v.current=e;var f=e.children,O=e.id,j=Object(u["useMemo"])(()=>O,[]),m=Object(u["useCallback"])(()=>{var e,t,r,o=v.current,c=b.current,u=o.option;n()(u,c.option)||(null===(e=d.current)||void 0===e||e.setCoordinates(u.coordinates),u.animate?null===(t=d.current)||void 0===t||t.play():null===(r=d.current)||void 0===r||r.pause())},[]),p=Object(u["useCallback"])(()=>{(null===l||void 0===l?void 0:l.getSource(j))||(d.current=void 0,c(),C())},[]),g=Object(u["useCallback"])(()=>{var e=v.current;s.current||(s.current=document.createElement("canvas"),s.current.width=e.width||400,s.current.height=e.height||400,document.body.appendChild(s.current))},[]),y=Object(u["useCallback"])(()=>{s.current&&s.current.remove(),s.current=void 0},[]),C=Object(u["useCallback"])(()=>{var e=v.current;!(null===l||void 0===l?void 0:l.getSource(j))&&s.current&&(null===l||void 0===l||l.addSource(j,Object(o["a"])(Object(o["a"])({},e.option),{},{type:"canvas",canvas:s.current})),d.current=null===l||void 0===l?void 0:l.getSource(j),k(),c())},[]),h=Object(u["useCallback"])(()=>{if(null===l||void 0===l?void 0:l.getSource(j)){var e=null===l||void 0===l?void 0:l.getStyle(),t=e.layers;null===t||void 0===t||t.filter(e=>e.source===j).forEach(e=>!!l.getLayer(e.id)&&l.removeLayer(e.id)),l.removeSource(j),d.current=void 0}},[]),k=Object(u["useCallback"])(()=>{t&&("function"===typeof t?t({canvas:s.current,source:d.current}):t.current={canvas:s.current,source:d.current})},[]),S=Object(u["useCallback"])(()=>{null===l||void 0===l||l.on("style.load",p)},[]);return Object(u["useEffect"])(()=>{r.current?(m(),b.current=Object(o["a"])({},e)):(g(),C(),S(),r.current=!0)}),Object(u["useEffect"])(()=>()=>{null===l||void 0===l||l.off("style.load",p),h(),y()},[]),d.current&&f?f:null}),s=d,b=Object(u["forwardRef"])((e,t)=>{var r=Object(u["useRef"])(!1),c=i(),a=Object(u["useContext"])(x),l=a.map,d=Object(u["useRef"])(),s=Object(u["useRef"])(e),b=Object(u["useRef"])(e);b.current=e;var v=e.children,f=e.id,O=Object(u["useMemo"])(()=>f,[]),j=Object(u["useCallback"])(()=>{var e,t=b.current,r=s.current,o=t.option;n()(o.data,r.option.data)&&JSON.stringify(o.data)===JSON.stringify(r.option.data)||(null===(e=d.current)||void 0===e||e.setData(o.data))},[]),m=Object(u["useCallback"])(e=>{(null===l||void 0===l?void 0:l.getSource(O))||(d.current=void 0,c(),p())},[]),p=Object(u["useCallback"])(()=>{var e=b.current;(null===l||void 0===l?void 0:l.getSource(O))||(null===l||void 0===l||l.addSource(O,Object(o["a"])(Object(o["a"])({},e.option),{},{type:"geojson"})),null===l||void 0===l||l.on("sourcedata",y))},[]),g=Object(u["useCallback"])(()=>{if(null===l||void 0===l?void 0:l.getSource(O)){var e=null===l||void 0===l?void 0:l.getStyle(),t=e.layers;null===t||void 0===t||t.filter(e=>e.source===O).forEach(e=>!!l.getLayer(e.id)&&l.removeLayer(e.id)),l.removeSource(O)}},[]),y=Object(u["useCallback"])(()=>{var e=b.current;d.current=null===l||void 0===l?void 0:l.getSource(O),d.current&&(null===l||void 0===l?void 0:l.isSourceLoaded(O))&&(d.current&&e.option.data,t&&("function"===typeof t?t(d.current):t.current=d.current),null===l||void 0===l||l.off("sourcedata",y),c())},[]),C=Object(u["useCallback"])(()=>{null===l||void 0===l||l.on("style.load",m)},[]);return Object(u["useEffect"])(()=>{r.current?(j(),s.current=Object(o["a"])(Object(o["a"])({},e),{},{option:{data:e.option.data?JSON.parse(JSON.stringify(e.option.data)):{}}})):(p(),C(),r.current=!0)}),Object(u["useEffect"])(()=>()=>{null===l||void 0===l||l.off("style.load",m),g()},[]),d.current&&v?v:null}),v=b,f=Object(u["forwardRef"])((e,t)=>{var r=Object(u["useRef"])(!1),c=i(),a=Object(u["useContext"])(x),l=a.map,d=Object(u["useRef"])(),s=Object(u["useRef"])(Object(o["a"])({},e)),b=Object(u["useRef"])(Object(o["a"])({},e));b.current=e;var v=e.children,f=e.id,O=Object(u["useMemo"])(()=>f,[]),j=Object(u["useCallback"])(()=>{var e,t=b.current,r=s.current,o=t.option;n()(o,r.option)||(null===(e=d.current)||void 0===e||e.updateImage(o))},[]),m=Object(u["useCallback"])(()=>{(null===l||void 0===l?void 0:l.getSource(O))||(d.current=void 0,c(),p())},[]),p=Object(u["useCallback"])(()=>{var e=b.current;(null===l||void 0===l?void 0:l.getSource(O))||(null===l||void 0===l||l.addSource(O,Object(o["a"])(Object(o["a"])({},e.option),{},{type:"image"})),null===l||void 0===l||l.on("sourcedata",y))},[]),g=Object(u["useCallback"])(()=>{if(null===l||void 0===l?void 0:l.getSource(O)){var e=null===l||void 0===l?void 0:l.getStyle(),t=e.layers;null===t||void 0===t||t.filter(e=>e.source===O).forEach(e=>!!l.getLayer(e.id)&&l.removeLayer(e.id)),l.removeSource(O)}},[]),y=Object(u["useCallback"])(()=>{var e=b.current;d.current=null===l||void 0===l?void 0:l.getSource(O),d.current&&(null===l||void 0===l?void 0:l.isSourceLoaded(O))&&(d.current&&e.option,t&&("function"===typeof t?t(d.current):t.current=d.current),null===l||void 0===l||l.off("sourcedata",y),c())},[]),C=Object(u["useCallback"])(()=>{null===l||void 0===l||l.on("style.load",m)},[]);return Object(u["useEffect"])(()=>{r.current?(j(),s.current=Object(o["a"])({},e)):(p(),C(),r.current=!0)}),Object(u["useEffect"])(()=>()=>{null===l||void 0===l||l.off("style.load",m),g()},[]),d.current&&v?v:null}),O=f,j=r("PpiC"),m={onError:"error",onClick:"click",onLoad:"load",onData:"data",onDataLoading:"dataloading",onRemove:"remove",onRender:"render",onResize:"resize",onWebGlContextLost:"webglcontextlost",onWebGlContextRestored:"webglcontextrestored",onTileDataLoading:"tiledataloading",onSourceData:"sourcedata",onSourceDataLoading:"sourcedataloading",onStyleData:"styledata",onStyleDataLoading:"styledataloading",onBoxZoomCancel:"boxzoomcancel",onBoxZoomEnd:"boxzoomend",onBoxZoomStart:"boxzoomstart",onContextMenu:"contextmenu",onTouchCancel:"touchcancel",onTouchEnd:"touchend",onTouchMove:"touchmove",onTouchStart:"touchstart",onDblClick:"dblclick",onZoom:"zoom",onZoomEnd:"zoomend",onZoomStart:"zoomstart",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseout",onMove:"move",onMoveEnd:"moveend",onMoveStart:"movestart",onPitch:"pitch",onPitchEnd:"pitchend",onPitchStart:"pitchstart",onRotate:"rotate",onRotateEnd:"rotateend",onRotateStart:"rotatestart",onWheel:"wheel"},p={onClick:"click",onDblClick:"dblclick",onMouseDown:"mousedown",onMouseUp:"mouseup",onMouseMove:"mousemove",onMouseEnter:"mouseenter",onMouseLeave:"mouseleave",onMouseOver:"mouseover",onMouseOut:"mouseout",onContextMenu:"contextmenu",onTouchStart:"touchstart",onTouchEnd:"touchend",onTouchCancel:"touchcancel"},g={onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart"};function y(e,t,r,o,c){c?e[o](t,c,r):e[o](t,r)}function C(e,t,r,o){var c=Object.keys(e),n=c.reduce((c,n)=>{var u=t[n];return u&&(y(r,e[n],u,"on",o),c[n]=u),c},{});return n}function h(e,t,r,c,n){var u=Object.keys(c),a=u.filter(r=>!!e[r]&&"function"!==typeof t[r]||e[r]!==t[r]);a.forEach(t=>{y(r,c[t],e[t],"off",n),delete e[t]});var l=u.filter(r=>e[r]?e[r]!==t[r]:"function"===typeof t[r]).reduce((e,t)=>(e[t]=c[t],e),{}),i=C(l,t,r,n);return Object(o["a"])(Object(o["a"])({},e),i)}function k(e,t){return!(!t||!e||e===t)&&(Array.isArray(t)?(t&&t[0])!==e.lng||(t&&t[1])!==e.lat:"lon"in t?(null===t||void 0===t?void 0:t.lon)!==e.lng||t.lat!==e.lat:(null===t||void 0===t?void 0:t.lat)!==e.lng||t.lat!==e.lat)}function S(e,t){var r={};return Array.from(new Set([...Object.keys(e),...Object.keys(t)])).forEach(o=>{e[o]!==t[o]&&(r[o]=t[o])}),r}var R=Object(u["forwardRef"])((e,t)=>{var r=Object(u["useRef"])(!1),c=Object(u["useContext"])(x),a=c.map,l=Object(u["useRef"])({}),i=Object(u["useRef"])(),d=Object(u["useRef"])(Object(o["a"])({},e)),s=Object(u["useRef"])(Object(o["a"])({},e)),b=Object(u["useMemo"])(()=>e.id,[]);s.current=e;var v=Object(u["useCallback"])(()=>{var e=s.current,t=d.current;l.current=h(l.current,e,a,p,b);var r=e.layout||{},o=t.layout||{};if(!n()(r,o)){var c=S(o,r);Object.keys(c).forEach(e=>{null===a||void 0===a||a.setLayoutProperty(b,e,c[e])})}var u=e.paint||{},i=t.paint||{};if(!n()(u,i)){var v=S(i,u);Object.keys(v).forEach(e=>{null===a||void 0===a||a.setPaintProperty(b,e,v[e])})}var f=e.filter||[],O=t.filter||[];n()(f.toString(),O.toString())||null===a||void 0===a||a.setFilter(b,f);var j=null===a||void 0===a?void 0:a.getMaxZoom(),m=null===a||void 0===a?void 0:a.getMinZoom(),g=[e.minzoom||m,e.maxzoom||j],y=[t.minzoom||m,t.maxzoom||j];n()(g.toString(),y.toString())||null===a||void 0===a||a.setLayerZoomRange(b,g[0],g[1]),e.before&&e.before!==t.before&&(null===a||void 0===a||a.moveLayer(b,e.before))},[]),f=Object(u["useCallback"])(()=>{(null===a||void 0===a?void 0:a.getLayer(b))&&(null===a||void 0===a||a.removeLayer(b))},[]),O=Object(u["useCallback"])(()=>{var e=s.current,t=(e.onClick,e.onContextMenu,e.onDblClick,e.onMouseDown,e.onMouseEnter,e.onMouseLeave,e.onMouseMove,e.onMouseOut,e.onMouseOver,e.onMouseUp,e.onTouchCancel,e.onTouchEnd,e.onTouchStart,e.sourceLayer),r=e.before,c=e.id,n=Object(j["a"])(e,["onClick","onContextMenu","onDblClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onTouchCancel","onTouchEnd","onTouchStart","sourceLayer","before","id"]),u=Object(o["a"])(Object(o["a"])({},n),{},{id:c},t?{"source-layer":t}:null);null===a||void 0===a||a.addLayer(u,r||void 0)},[]);return Object(u["useEffect"])(()=>{r.current?(v(),d.current=Object(o["a"])({},e)):(r.current=!0,O())}),Object(u["useEffect"])(()=>{i.current=null===a||void 0===a?void 0:a.getLayer(b),t&&("function"===typeof t?t(i.current):t.current=i.current),l.current=C(p,e,a,b)},[]),Object(u["useEffect"])(()=>()=>{f()},[]),null}),E=R,M=r("tJVT"),L=r("peBt"),w=r.n(L),x=a.a.createContext({map:null}),T=a.a.forwardRef((e,t)=>{var c=Object(u["useRef"])(!1),l=Object(u["useState"])(null),i=Object(M["a"])(l,2),d=i[0],s=i[1],b=Object(u["useRef"])(document.createElement("div")),v=Object(u["useRef"])({}),f=Object(u["useRef"])(Object(o["a"])({},e)),O=Object(u["useRef"])(Object(o["a"])({},e));O.current=e;var p=e.baseapiurl,g=e.workercount,y=e.maxparallelimagerequests,k=e.setRTLTextPlugin,S=e.divStyle,R=e.divClass,E=e.injectCSS,L=void 0===E||E,T=(e.movingMethod,e.animationOptions,e.fitBounds),D=(e.flyToOptions,e.children),P=Object(j["a"])(e,["baseapiurl","workercount","maxparallelimagerequests","setRTLTextPlugin","divStyle","divClass","injectCSS","movingMethod","animationOptions","fitBounds","flyToOptions","children"]),B=Object(u["useCallback"])(()=>{if(d){var e=O.current,t=f.current;v.current=h(v.current,e,d,m);var r=t.zoom!==e.zoom,c=t.bearing!==e.bearing,u=t.pitch!==e.pitch,a=!n()(t.center,e.center);if(e.fitBounds){var l=t.fitBounds,i=l!==e.fitBounds||e.fitBounds.length!==(l&&l.length)||!!l.filter((t,r)=>{var o=e.fitBounds&&e.fitBounds[r];return t[0]!==(o&&o[0])||t[1]!==(o&&o[1])})[0];!i&&n()(t.fitBoundsOptions,e.fitBoundsOptions)||d.fitBounds(e.fitBounds,e.fitBoundsOptions,{fitboundUpdate:!0})}e.style&&!n()(t.style,e.style)&&d.setStyle(e.style),t.renderWorldCopies!==e.renderWorldCopies&&d.setRenderWorldCopies(e.renderWorldCopies);var s=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"];s.forEach(r=>{t[r]!==e[r]&&d[r][e[r]?"enable":"disable"]()});var b=["maxBounds","maxZoom","minZoom","minPitch","maxPitch"];if(b.forEach(r=>{t[r]!==e[r]&&d["set".concat(r.charAt(0).toUpperCase()+r.slice(1))](e[r])}),r||a||c||u){var j=e.movingMethod||"flyTo";d[j](Object(o["a"])(Object(o["a"])(Object(o["a"])({},e.animationOptions),e.flyToOptions),{},{zoom:r&&e.zoom||d.getZoom(),center:a&&e.center||d.getCenter(),bearing:c&&e.bearing||d.getBearing(),pitch:u&&e.pitch||d.getPitch()}))}}},[d]),z=Object(u["useCallback"])(()=>{L&&r("ypEQ"),w.a.prewarm(),p&&(w.a.baseApiUrl=p),g&&(w.a.workerCount=g),y&&(w.a.maxParallelImageRequests=y),k&&w.a.setRTLTextPlugin(k,e=>{throw e},!0);var c=new w.a.Map(Object(o["a"])(Object(o["a"])({},P),{},{container:b.current,center:T?[(T[0][0]+T[1][0])/2,(T[0][1]+T[1][1])/2]:P.center}));t&&("function"===typeof t?t(c):t.current=c),v.current=C(m,e,c),c.on("load",()=>{s(c)})},[]);return Object(u["useEffect"])(()=>{c.current||(z(),c.current=!0)}),Object(u["useEffect"])(()=>{c.current&&(B(),f.current=Object(o["a"])({},e))},[e]),Object(u["useEffect"])(()=>()=>{c.current=!1,d&&d.remove()},[]),a.a.createElement(x.Provider,{value:{map:d}},a.a.createElement("div",{className:R,style:Object(o["a"])(Object(o["a"])({},S),{width:"100%",height:"100%"}),ref:e=>{b.current=e}},!!d&&D))}),D=T,P=r("0Owb"),B=r("i8i4"),z=Object(u["forwardRef"])((e,t)=>{var r,c=Object(u["useRef"])(!1),n=Object(u["useState"])(!1),a=Object(M["a"])(n,2),l=a[0],i=a[1],d=Object(u["useContext"])(x),s=d.map,b=Object(u["useRef"])(Object(o["a"])({},e)),v=Object(u["useRef"])(Object(o["a"])({},e)),f=e.children,O=e.positon,m=e.withMarker,p=e.hidden,g=void 0!==p&&p,y=Object(j["a"])(e,["children","positon","withMarker","hidden"]);v.current=e;var C=Object(u["useRef"])(new w.a.Popup(y).setHTML('<div class="popup-content"></div>')),h=Object(u["useCallback"])(()=>{var e,t,r,o=v.current;o.withMarker||(null===(e=C.current)||void 0===e||e.setLngLat(o.positon),l||(i(!0),o.hidden?null===(t=C.current)||void 0===t||t.remove():null===(r=C.current)||void 0===r||r.addTo(s)))},[l]),k=Object(u["useCallback"])(()=>{if(C.current)if(C.current.on("open",()=>{i(!0)}).on("close",()=>{i(!1)}),m)m.setPopup(C.current);else{if(!O)throw new Error("\u72ec\u7acb\u4f7f\u7528\u7684Popup\u5fc5\u987b\u6dfb\u52a0position\u5c5e\u6027");var e,t;null===(e=C.current)||void 0===e||e.setLngLat(O),g||null===(t=C.current)||void 0===t||t.addTo(s)}},[]);return Object(u["useEffect"])(()=>{c.current&&(h(),b.current=Object(o["a"])({},e))},[e]),Object(u["useEffect"])(()=>{c.current||(c.current=!0,k())}),Object(u["useEffect"])(()=>{t&&("function"===typeof t?t(C.current):t.current=C.current)},[]),Object(u["useEffect"])(()=>()=>{c.current=!1,C.current&&C.current.off("open").off("close").remove()},[]),l&&!g&&(null===(r=C.current)||void 0===r?void 0:r.getElement())?Object(B["createPortal"])(f,C.current.getElement().querySelector(".popup-content")):null}),Z=z,I=Object(u["forwardRef"])((e,t)=>{var r=Object(u["useRef"])(!1),c=Object(u["useContext"])(x),n=c.map,l=Object(u["useRef"])(Object(o["a"])({},e)),i=Object(u["useRef"])(Object(o["a"])({},e));i.current=e;var d=Object(u["useRef"])({}),s=e.children,b=e.positon,v=e.show,f=void 0===v||v,O=e.popup,m=e.popupOption,p=Object(j["a"])(e,["children","positon","show","popup","popupOption"]),y=Object(u["useRef"])(new w.a.Marker(Object(o["a"])(Object(o["a"])({},p),{},{element:s?document.createElement("div"):void 0})).setLngLat(b)),S=Object(u["useCallback"])(()=>{var e=i.current,t=l.current;d.current=h(d.current,e,y.current,g);var r=e.show!==t.show;r&&y.current[e.show?"addTo":"remove"](n);var o=k(y.current.getLngLat(),e.positon),c=t.offset!==e.offset&&e.offset!==y.current.getOffset(),u=!!t.draggable!==!!e.draggable;o&&y.current.setLngLat(e.positon),c&&e.offset&&y.current.setOffset(e.offset),u&&y.current.setDraggable(!!e.draggable)},[]);return Object(u["useEffect"])(()=>{r.current?(S(),l.current=Object(o["a"])({},e)):(r.current=!0,y.current[f?"addTo":"remove"](n))}),Object(u["useEffect"])(()=>{t&&("function"===typeof t?t(y.current):t.current=y.current),d.current=C(g,e,y.current)},[]),Object(u["useEffect"])(()=>()=>{r.current=!1,y.current.remove()},[]),a.a.createElement(a.a.Fragment,null,s?Object(B["createPortal"])(s,y.current.getElement()):null,!!O&&a.a.createElement(Z,Object(P["a"])({},m,{withMarker:y.current}),O))}),J=I,N=Object(u["forwardRef"])((e,t)=>{var r=Object(u["useRef"])(!1),c=i(),a=Object(u["useContext"])(x),l=a.map,d=Object(u["useRef"])(),s=Object(u["useRef"])(Object(o["a"])({},e)),b=Object(u["useRef"])(Object(o["a"])({},e));b.current=e;var v=e.children,f=e.id,O=Object(u["useMemo"])(()=>f,[]),j=Object(u["useCallback"])(()=>{var e=b.current,t=s.current,r=e.option;n()(r,t.option)||(g(),m())},[]),m=Object(u["useCallback"])(()=>{(null===l||void 0===l?void 0:l.getSource(O))||(d.current=void 0,c(),p())},[]),p=Object(u["useCallback"])(()=>{var e=b.current;(null===l||void 0===l?void 0:l.getSource(O))||(null===l||void 0===l||l.addSource(O,Object(o["a"])(Object(o["a"])({},e.option),{},{type:"raster"})),null===l||void 0===l||l.on("sourcedata",y))},[]),g=Object(u["useCallback"])(()=>{if(null===l||void 0===l?void 0:l.getSource(O)){var e=null===l||void 0===l?void 0:l.getStyle(),t=e.layers;null===t||void 0===t||t.filter(e=>e.source===O).forEach(e=>!!l.getLayer(e.id)&&l.removeLayer(e.id)),l.removeSource(O)}},[]),y=Object(u["useCallback"])(()=>{var e=b.current;d.current=null===l||void 0===l?void 0:l.getSource(O),d.current&&(null===l||void 0===l?void 0:l.isSourceLoaded(O))&&(d.current&&e.option,t&&("function"===typeof t?t(d.current):t.current=d.current),null===l||void 0===l||l.off("sourcedata",y),c())},[]),C=Object(u["useCallback"])(()=>{null===l||void 0===l||l.on("style.load",m)},[]);return Object(u["useEffect"])(()=>{r.current?(j(),s.current=Object(o["a"])({},e)):(p(),C(),r.current=!0)}),Object(u["useEffect"])(()=>()=>{null===l||void 0===l||l.off("style.load",m),g()},[]),d.current&&v?v:null}),W=N,U=Object(u["forwardRef"])((e,t)=>{var r=Object(u["useRef"])(!1),c=i(),a=Object(u["useContext"])(x),l=a.map,d=Object(u["useRef"])(),s=Object(u["useRef"])(Object(o["a"])({},e)),b=Object(u["useRef"])(Object(o["a"])({},e));b.current=e;var v=e.children,f=e.id,O=Object(u["useMemo"])(()=>f,[]),j=Object(u["useCallback"])(()=>{var e=b.current,t=s.current,r=e.option;n()(r,t.option)||(g(),m())},[]),m=Object(u["useCallback"])(()=>{(null===l||void 0===l?void 0:l.getSource(O))||(d.current=void 0,c(),p())},[]),p=Object(u["useCallback"])(()=>{var e=b.current;(null===l||void 0===l?void 0:l.getSource(O))||(null===l||void 0===l||l.addSource(O,Object(o["a"])(Object(o["a"])({},e.option),{},{type:"raster-dem"})),null===l||void 0===l||l.on("sourcedata",y))},[]),g=Object(u["useCallback"])(()=>{if(null===l||void 0===l?void 0:l.getSource(O)){var e=null===l||void 0===l?void 0:l.getStyle(),t=e.layers;null===t||void 0===t||t.filter(e=>e.source===O).forEach(e=>!!l.getLayer(e.id)&&l.removeLayer(e.id)),l.removeSource(O)}},[]),y=Object(u["useCallback"])(()=>{var e=b.current;d.current=null===l||void 0===l?void 0:l.getSource(O),d.current&&(null===l||void 0===l?void 0:l.isSourceLoaded(O))&&(d.current&&e.option,t&&("function"===typeof t?t(d.current):t.current=d.current),null===l||void 0===l||l.off("sourcedata",y),c())},[]),C=Object(u["useCallback"])(()=>{null===l||void 0===l||l.on("style.load",m)},[]);return Object(u["useEffect"])(()=>{r.current?(j(),s.current=Object(o["a"])({},e)):(p(),C(),r.current=!0)}),Object(u["useEffect"])(()=>()=>{null===l||void 0===l||l.off("style.load",m),g()},[]),d.current&&v?v:null}),q=U,A=Object(u["forwardRef"])((e,t)=>{var r=Object(u["useRef"])(!1),c=i(),a=Object(u["useContext"])(x),l=a.map,d=Object(u["useRef"])(),s=Object(u["useRef"])(Object(o["a"])({},e)),b=Object(u["useRef"])(Object(o["a"])({},e));b.current=e;var v=e.children,f=e.id,O=Object(u["useMemo"])(()=>f,[]),j=Object(u["useCallback"])(()=>{var e=b.current,t=s.current,r=e.option;n()(r,t.option)||(g(),m())},[]),m=Object(u["useCallback"])(()=>{(null===l||void 0===l?void 0:l.getSource(O))||(d.current=void 0,c(),p())},[]),p=Object(u["useCallback"])(()=>{var e=b.current;(null===l||void 0===l?void 0:l.getSource(O))||(null===l||void 0===l||l.addSource(O,Object(o["a"])(Object(o["a"])({},e.option),{},{type:"vector"})),null===l||void 0===l||l.on("sourcedata",y))},[]),g=Object(u["useCallback"])(()=>{if(null===l||void 0===l?void 0:l.getSource(O)){var e=null===l||void 0===l?void 0:l.getStyle(),t=e.layers;null===t||void 0===t||t.filter(e=>e.source===O).forEach(e=>!!l.getLayer(e.id)&&l.removeLayer(e.id)),l.removeSource(O)}},[]),y=Object(u["useCallback"])(()=>{var e=b.current;d.current=null===l||void 0===l?void 0:l.getSource(O),d.current&&(null===l||void 0===l?void 0:l.isSourceLoaded(O))&&(d.current&&e.option,t&&("function"===typeof t?t(d.current):t.current=d.current),null===l||void 0===l||l.off("sourcedata",y),c())},[]),C=Object(u["useCallback"])(()=>{null===l||void 0===l||l.on("style.load",m)},[]);return Object(u["useEffect"])(()=>{r.current?(j(),s.current=Object(o["a"])({},e)):(p(),C(),r.current=!0)}),Object(u["useEffect"])(()=>()=>{null===l||void 0===l||l.off("style.load",m),g()},[]),d.current&&v?v:null}),F=A,H=Object(u["forwardRef"])((e,t)=>{var r=Object(u["useRef"])(!1),c=i(),a=Object(u["useContext"])(x),l=a.map,d=Object(u["useRef"])(),s=Object(u["useRef"])(Object(o["a"])({},e)),b=Object(u["useRef"])(Object(o["a"])({},e));b.current=e;var v=e.children,f=e.id,O=Object(u["useMemo"])(()=>f,[]),j=Object(u["useCallback"])(()=>{var e,t=b.current,r=s.current,o=t.option;n()(o,r.option)||(null===(e=d.current)||void 0===e||e.setCoordinates(o.coordinates))},[]),m=Object(u["useCallback"])(()=>{(null===l||void 0===l?void 0:l.getSource(O))||(d.current=void 0,c(),p())},[]),p=Object(u["useCallback"])(()=>{var e=b.current;(null===l||void 0===l?void 0:l.getSource(O))||(null===l||void 0===l||l.addSource(O,Object(o["a"])(Object(o["a"])({},e.option),{},{type:"video"})),null===l||void 0===l||l.on("sourcedata",y))},[]),g=Object(u["useCallback"])(()=>{if(null===l||void 0===l?void 0:l.getSource(O)){var e=null===l||void 0===l?void 0:l.getStyle(),t=e.layers;null===t||void 0===t||t.filter(e=>e.source===O).forEach(e=>!!l.getLayer(e.id)&&l.removeLayer(e.id)),l.removeSource(O)}},[]),y=Object(u["useCallback"])(()=>{var e=b.current;d.current=null===l||void 0===l?void 0:l.getSource(O),d.current&&(null===l||void 0===l?void 0:l.isSourceLoaded(O))&&(d.current&&e.option,t&&("function"===typeof t?t(d.current):t.current=d.current),null===l||void 0===l||l.off("sourcedata",y),c())},[]),C=Object(u["useCallback"])(()=>{null===l||void 0===l||l.on("style.load",m)},[]);return Object(u["useEffect"])(()=>{r.current?(j(),s.current=Object(o["a"])({},e)):(p(),C(),r.current=!0)}),Object(u["useEffect"])(()=>()=>{null===l||void 0===l||l.off("style.load",m),g()},[]),d.current&&v?v:null}),Y=H;r("TNxW");var G=Object(u["forwardRef"])((e,t)=>{var r=Object(u["useRef"])(!1),c=i(),a=Object(u["useContext"])(x),l=a.map,d=Object(u["useRef"])(Object(o["a"])({},e)),s=Object(u["useRef"])(Object(o["a"])({},e));s.current=e;var b=Object(u["useRef"])(),v=e.children,f=e.name,O=Object(u["useMemo"])(()=>f,[]),j=Object(u["useCallback"])(()=>{var e=s.current,t=d.current,r=e.image;n()(r,t.image)||null===l||void 0===l||l.updateImage(O,r)},[]),m=Object(u["useCallback"])(()=>{l&&l.hasImage("imageName")&&l.removeImage(O)},[]),p=Object(u["useCallback"])(()=>{var e=s.current,t=e.image,r=e.options;null===l||void 0===l||l.addImage(O,t,r),b.current=t,c()},[]),g=Object(u["useCallback"])(()=>{(null===l||void 0===l?void 0:l.hasImage(O))||(b.current=void 0,p())},[]),y=Object(u["useCallback"])(()=>{null===l||void 0===l||l.on("style.load",g)},[]);return Object(u["useEffect"])(()=>{r.current?(j(),d.current=Object(o["a"])({},e)):(y(),p(),r.current=!0)}),Object(u["useEffect"])(()=>()=>{m(),null===l||void 0===l||l.off("style.load",g)},[]),b.current&&v?v:null}),Q=G,V=Object(u["forwardRef"])((e,t)=>{var r=Object(u["useRef"])(!1),c=i(),l=Object(u["useContext"])(x),d=l.map,s=Object(u["useRef"])(Object(o["a"])({},e)),b=Object(u["useRef"])(Object(o["a"])({},e));b.current=e;var v=Object(u["useRef"])(),f=e.name,O=e.options,j=e.children,m=Object(u["useMemo"])(()=>f,[]),p=Object(u["useCallback"])(()=>{var e=b.current,t=s.current,r=e.url;n()(r,t.url)||y()},[]),g=Object(u["useCallback"])(()=>{d&&d.hasImage(m)&&d.removeImage(m)},[]),y=Object(u["useCallback"])(()=>{var e=b.current,t=e.url;null===d||void 0===d||d.loadImage(t,(e,t)=>{if(e)throw e;v.current=t,c()})},[]);return Object(u["useEffect"])(()=>{r.current?(p(),s.current=Object(o["a"])({},e)):(y(),r.current=!0)}),Object(u["useEffect"])(()=>()=>{g()},[]),v.current?a.a.createElement(Q,{name:m,ref:t,image:v.current,options:O},j):null}),X=V,K=Object(u["forwardRef"])((e,t)=>{var r=Object(u["useRef"])(!1),c=Object(u["useContext"])(x),n=c.map,a=Object(u["useRef"])({}),l=Object(u["useRef"])(),i=Object(u["useRef"])(Object(o["a"])({},e)),d=Object(u["useRef"])(Object(o["a"])({},e)),s=Object(u["useMemo"])(()=>e.data.id,[]);d.current=e;var b=Object(u["useCallback"])(()=>{var e=d.current,t=i.current;a.current=h(a.current,e,n,m,s),e.before&&e.before!==t.before&&(null===n||void 0===n||n.moveLayer(s,e.before))},[]),v=Object(u["useCallback"])(()=>{(null===n||void 0===n?void 0:n.getLayer(s))&&(null===n||void 0===n||n.removeLayer(s))},[]),f=Object(u["useCallback"])(()=>{if(!(null===n||void 0===n?void 0:n.getLayer(s))){var e=d.current,t=e.before,r=e.data;null===n||void 0===n||n.addLayer(r,t||void 0),p()}},[]),O=Object(u["useCallback"])(()=>{(null===n||void 0===n?void 0:n.getLayer(s))||f()},[]),j=Object(u["useCallback"])(()=>{null===n||void 0===n||n.on("style.load",O)},[]);Object(u["useEffect"])(()=>{r.current?(b(),i.current=Object(o["a"])({},e)):(r.current=!0,f(),j())});var p=Object(u["useCallback"])(()=>{l.current=null===n||void 0===n?void 0:n.getLayer(s),t&&("function"===typeof t?t(l.current):t.current=l.current)},[]);return Object(u["useEffect"])(()=>{a.current=C(m,e,n,s)},[]),Object(u["useEffect"])(()=>()=>{null===n||void 0===n||n.off("style.load",O),v()},[]),null}),$=K}}]);